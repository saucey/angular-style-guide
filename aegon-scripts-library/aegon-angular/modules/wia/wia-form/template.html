<div class="wia_form" *ngIf="!submitted">
  <div class="messages messages--functional visible">

    <div class="header">
      Bekijk uw inkomen bij arbeidsongeschiktheid
    </div>
    <p class="content">
      Er verandert veel als u arbeidsongeschikt raakt. Vind uit wat dit voor uw inkomen betekent.
    </p>

    <button class="button arrow" [class.hidden]="step > 1" (click)="step = 2">Bekijk</button>

    <div *ngIf="step > 1" [@flyTop]="'in'">
      <div class="header">U wordt ziek en dan?</div>
      <p>Bent u na 2 jaar nog steeds ziek? Dan bepaalt het UWV wat u nog kunt verdienen in dezelfde of een andere baan, ook al bent u ziek. Dat is de restverdiencapaciteit: het bedrag dat u nog kunt verdienen.</p>

      <div class="header">Na de eerste 2 jaar</div>
      <p>Als u (gedeeltelijk) arbeidsongeschikt wordt, ontvangt u eerst twee jaar lang een inkomen van uw werkgever. Dat is de loondoorbetaling door uw werkgever. Daarnaast moeten u en uw werkgever er alles aan doen om u weer aan het werk te krijgen.</p>

      <div class="header">Wat betekent dit voor u?</div>
      <p>Bekijk hoe uw inkomen verandert bij verschillende mate van arbeidsongeschiktheid. Vul eerst uw huidige salaris in en daarna eventueel uw arbeidsongeschiktheidverzekering.</p>
    </div>

    <button class="button arrow" [class.hidden]="step === 1 || step > 2" (click)="step = 3">Vul in</button>

    <div *ngIf="step > 2" [@flyTop]="'in'">

      <label>
        Uw salaris, bruto per jaar
        <aa-input-number class="aa-input--euro" [(ngModel)]="income" [placeholder]="0" defaultValue=""></aa-input-number>
      </label>

      <div>
        <div class="form-1" *ngIf="visiblePage === 1">
          <p>Stel uw persoonlijke situatie in en bereken hoe hoog uw inkomen is bij langdurige arbeidsongeschiktheid.</p>

          <label>De verzekeringscode van uw werkgever</label>
          <input type="text" [(ngModel)]="personalizationCode" placeholder="355A0"/>

          <div>
            <button class="button arrow" (click)="onCodeSubmit()">Verder</button>
          </div>

          <ul class="arrow wia_form__products-switch">
            <li><a (click)="visiblePage = 2">Geen code? zelf verzekering kiezen</a></li>
          </ul>
        </div>


        <div class="form-2" *ngIf="visiblePage === 2">
          <form (submit)="onProductFormSubmit($event)">
            <p>Het verzekeringsproduct dat u heeft:</p>
            <div *ngFor="let product of getProducts(); trackBy:trackById">
              <label>
                {{product.label}}
                <input type="checkbox" name="wia-form-product-{{product.id}}"
                       [(ngModel)]="product.selected"
                       [disabled]="product.disabled"
                       (change)="updateProduct(product, $event)">
              </label>
              <div class="product-attrs" [hidden]="!product.selected || !product.attrs?.length">
                <ul>
                  <div *ngFor="let attr of product.attrs; trackBy:trackById">
                    <li *ngIf="isProductAttributeVisible(attr)">
                      {{ attr.label }}
                      <select class="no-dd" name="wia-form-selectProduct-{{attr.id}}" [(ngModel)]="attr.value">
                        <option *ngFor="let option of attr.options; trackBy:trackByValue" value="{{ option.value }}">{{ option.label }}</option>
                      </select>
                    </li>
                  </div>
                </ul>
              </div>
            </div>

            <ul class="arrow wia_form__products-switch">
              <li><a (click)="visiblePage = 1">Productcode ontvangen? Voer de code in</a></li>
            </ul>

            <button class="button arrow">Verder</button>
          </form>

        </div>


      </div>
    </div>

  </div>

</div>
